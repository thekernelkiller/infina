```
adaptive_ai_companion/
├── .env                  # Environment variables (API keys, configs) - gitignored
├── .gitignore            # Specifies intentionally untracked files
├── Makefile              # Optional: for common commands (lint, test, run, setup)
├── README.md             # Project overview, setup, how to run, contribution guidelines
├── requirements.in       # Input file for pip-compile (abstract dependencies)
├── requirements.txt      # Pinned dependencies (generated by pip-compile)
│
├── app/                  # Main application logic
│   ├── __init__.py
│   ├── main.py             # Entry point (Streamlit app / FastAPI backend)
│   ├── agent/              # Phase 3: Agentic capabilities
│   │   ├── __init__.py
│   │   ├── agent_core.py     # Core ReAct agent logic (e.g., for 5.8, 5.9, 5.10)
│   │   ├── tools/            # dspy.Tool definitions
│   │   │   ├── __init__.py
│   │   │   ├── web_search_tool.py  # For PRD 5.8, 5.9
│   │   │   ├── calculator_tool.py  # For PRD 5.10
│   │   │   └── memory_tool.py      # For PRD 5.6 (if used as a dynamic tool)
│   │   └── decision_modules.py # DSPy modules for deciding to use tools (e.g., for 5.8)
│   │
│   ├── core/               # Phase 1 & 2: Core chatbot functionalities
│   │   ├── __init__.py
│   │   ├── user_understanding.py # PRD 5.1: Initial User Understanding module
│   │   ├── persona_crafting.py   # PRD 5.2: Dynamic Persona Crafting module
│   │   ├── response_generation.py# PRD 5.3: Persona-Driven Response Generation module
│   │   └── session_memory.py     # PRD 5.4: Basic Session Memory logic
│   │
│   ├── data_management/    # Phase 2: Long-term memory
│   │   ├── __init__.py
│   │   ├── sqlite_handler.py # PRD 5.5: SQLite3 CRUD operations
│   │   └── profile_updater.py  # PRD 5.7: End-of-Session Profile Update module
│   │
│   ├── background_tasks/   # Phase 4: Background personalized curation
│   │   ├── __init__.py
│   │   ├── content_curator.py  # PRD 5.11: Personalized Content Curation logic & modules
│   │   └── scheduler.py        # Optional: If custom scheduling logic is needed
│   │
│   └── dspy_config.py        # Centralized DSPy LM configuration, API key loading
│
├── data/                 # Data for training, evaluation, examples
│   ├── __init__.py
│   ├── examples/           # Handcrafted examples for DSPy modules (as per PRD)
│   │   ├── phase1_user_understanding.jsonl
│   │   ├── phase1_persona_crafting.jsonl
│   │   ├── phase1_response_generation.jsonl
│   │   ├── phase2_profile_update.jsonl
│   │   ├── phase3_agent_web_search_decision.jsonl
│   │   ├── phase3_agent_report_generation.jsonl # Trajectories or (request, report) pairs
│   │   └── phase4_content_curation.jsonl
│   │
│   ├── user_data/          # User-specific data (e.g., SQLite DBs) - gitignored
│   │   └── .gitkeep          # Ensures the directory is tracked if empty
│   │
│   └── curated_content/    # Stores output from background curation - gitignored
│       └── .gitkeep
│
├── dspy_pipelines/       # DSPy optimization pipelines and compiled programs
│   ├── __init__.py
│   ├── optimization_scripts/ # Scripts to run DSPy optimizers for different phases/modules
│   │   ├── __init__.py
│   │   ├── optimize_phase1_mvp.py
│   │   ├── optimize_phase2_memory.py
│   │   ├── optimize_phase3_agents.py
│   │   └── optimize_phase4_curation.py
│   │
│   └── compiled_programs/  # Store optimized/compiled DSPy programs (e.g., JSONs)
│       ├── __init__.py
│       └── .gitkeep          # Consider if these should be gitignored or versioned
│
├── notebooks/            # Jupyter notebooks for experimentation, data analysis
│   ├── 00_dspy_quickstart_exploration.ipynb
│   ├── 01_data_preparation_and_analysis.ipynb
│   ├── 02_module_prototyping_user_understanding.ipynb
│   └── .gitkeep
│
├── tests/                # Unit and integration tests
│   ├── __init__.py
│   ├── conftest.py         # Pytest fixtures and shared test utilities
│   │
│   ├── unit/               # Unit tests for individual modules/functions
│   │   ├── __init__.py
│   │   ├── app/
│   │   │   ├── core/
│   │   │   │   ├── test_user_understanding.py
│   │   │   │   ├── test_persona_crafting.py
│   │   │   │   └── test_response_generation.py
│   │   │   ├── agent/
│   │   │   │   └── test_web_search_tool.py
│   │   │   └── data_management/
│   │   │       └── test_sqlite_handler.py
│   │   └── dspy_pipelines/ # Tests for optimization script helpers, etc.
│   │       └── ...
│   │
│   └── integration/        # Integration tests for module interactions / phases
│       ├── __init__.py
│       ├── test_phase1_mvp_flow.py
│       └── test_phase3_agent_proactive_search.py
│
└── metrics_and_evals/    # Scripts, definitions for evaluating DSPy performance
    ├── __init__.py
    ├── custom_metrics.py   # Custom evaluation metrics (e.g., LM-as-judge for persona from PRD)
    ├── evaluation_sets/    # Curated datasets for standardized evaluation runs (hold-out sets)
    │   ├── __init__.py
    │   ├── phase1_mvp_eval.jsonl
    │   ├── phase3_agent_eval.jsonl
    │   └── .gitkeep
    └── evaluation_scripts/ # Scripts to run evaluations and report metrics
        ├── __init__.py
        ├── evaluate_phase1_mvp.py
        └── .gitkeep
```

- default gemini model is `gemini-2.0-flash` and not anything else unless specified. 